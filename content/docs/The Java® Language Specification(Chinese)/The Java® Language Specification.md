---
title: "The Java® Language Specification"
description: ""
summary: ""
date: 2023-09-07T16:13:18+02:00
lastmod: 2023-09-07T16:13:18+02:00
draft: false
images: []
menu:
  docs:
    parent: ""
    identifier: "java-ee514306871548sd6e68dea3359133ad"
weight: 900
toc: true
---



## 一、简介

### 1.1. 规范的组织

Java® 编程语言是一种 通用的、并发的、基于类的、面向对象的语言。Java 编程语言是**强类型**和**静态类型**

- 强类型：强类型语言是指在编程时要求严格定义数据类型，不允许不同数据类型之间的隐式类型转换

```java
int num = 42;
String text = 42; // 这里会报错，需要进行类型转换
```

- 静态类型：静态类型语言是指在编译时进行类型检查，变量的数据类型必须在声明时明确定义，编译器可以根据这些类型信息进行类型检查，从而提前捕获潜在的类型错误。

```java
num = 42; // 这里会报错，需要定义类型
text = "Hello world"; // 这里会报错，需要定义类型
```

>***简单理解：***
>
> 强类型意味着不同类型的变量无法进行隐式转换
>
> 静态类型意味着需要变量定义类型才能使用



### 1.2. 示例程序

创建 oneAndOne 文件：

```java
public class oneAndOne {
    public static void main(String[] args) {
        for (int i = 0; i < args.length; i++)
            System.out.print(i == 0 ? args[i] : " " + args[i]);
        System.out.println();
    }
}

```

执行命令：

```
javac oneAndOne.java
java oneAndOne  Hello, world.
```

输出：

```java
Hello, world.
```



### 1.3. 符号

1. **引用Java SE平台API**：文本提到，在整个规范中，会引用Java SE平台API中的类和接口。当使用单个标识符（例如“N”）引用类或接口时，意图是引用`java.lang`包中名为“N”的类或接口。这是Java核心类的默认包。
2. **规范名称**：当引用来自`java.lang`之外的包中的类或接口时，规范使用规范名称，这是一个包括包名的完全限定名称。例如，它可能引用一个类为`com.example.MyClass`而不仅仅是“MyClass”。

> ***简单理解：***
>
> 当在Java规范中使用单个标识符引用类或接口时，通常是指这个类或接口来自Java核心包的默认包，也就是`java.lang`包。
>
> 如果要引用来自其他包的类或接口，规范要求提供完全限定名称，即包括包名的类或接口名称。这是为了确保唯一性，因为不同的包可能会包含具有相同名称的类或接口。





## 2.语法

### 2.1. 上下文无关语法

```
上下文无关语法由一个数字组成的制作。每部作品都有一个摘要 称为非终端的符号 它的左侧，以及一个或多个序列 非终端和终端符号作为 它的右手边。对于每种语法， 终端符号是从指定的字母表中提取的。

从一个句子开始，由一个可区分的句子组成 非终端，称为目标符号，给定 上下文无关语法指定了一种语言，即 可能由重复产生的终端符号序列 将序列中的任何非终端替换为 非终端是左侧的生产。
```

在该规范中，上下文无关语法表示一种形式文法。用于描述语言的结构。通常它由一系列**生产式**组成。CFG 用于描述各种编程语言、自然语言和其他形式语言的语法结构。

>生产式一般就是我们所说的表达式：左侧通常是一个**非终结符**（nonterminal），而右侧是一个包含**终结符**（terminal）和非终结符的符号序列

终结符是文法中的基本符号，它们是最终的语言元素，例如编程语言中的关键字、标识符、常数等。

非终结符则是抽象符号，它们可以被替换为其他符号的序列，用于构建语言的结构。



### 2.2. 词汇语法

**词法结构**：词法结构指的是编程语言中的字符和符号如何被解释为词法单元（tokens）。在Java编程语言中，词法结构定义了如何将Unicode字符序列转换为一系列输入元素。

**输入元素**：词法结构中的产生式描述了如何将Unicode字符序列翻译成**输入元素**。输入元素是编程语言的基本组成部分，它们组成了语法结构的终结符。在Java编程语言中，输入元素经过去除空白和注释后，形成了语法结构的终结符，这些被称为**标记**（tokens）。

1. **标记（Tokens）**：标记是编程语言中的基本单元，它们是已识别和分析的输入元素。在Java编程语言中，**标记包括标识符、关键字、字面值、分隔符和操作符**。这些标记是编程语言中构建程序的构建块。
2. **标识符**：标识符是变量名、方法名或类名等程序中自定义的名称。它们用于标识程序中的各种实体。
3. **关键字**：关键字是Java编程语言中具有特殊含义的保留字，例如 `if`、`for`、`while` 等。它们用于定义控制结构和语言关键部分。
4. **字面值**：字面值是编程语言中的常量，例如字符串、数字、布尔值等。它们表示数据的固定值。
5. **分隔符**：分隔符是用于分隔不同程序元素的符号，例如分号 `;` 用于结束语句。
6. **操作符**：操作符是用于执行操作的符号，例如加法运算符 `+`。



## 3.词汇结构

### 3.1. 统一码

程序是使用 Unicode 字符集编写。Java 编程语言以 16 位代码单元序列表示文本， 使用 UTF-16 编码。

>为了只使用16位单元表示完整的字符范围，Unicode标准定义了一种编码称为UTF-16。

Unicode的合法代码点范围现在是从U+0000到U+10FFFF，使用十六进制的U+n表示法。

ASCII（ANSI X3.4）是美国信息交换标准代码。Unicode UTF-16编码的前128个字符就是ASCII字符。

>Java语言中除了注释（§3.7）、标识符（§3.8）以及字符字面量、字符串字面量和文本块（§3.10.4, §3.10.5, §3.10.6）的内容外，程序中的所有输入元素（§3.5）仅由ASCII字符（或Unicode转义符（§3.3），这些转义符会转换为ASCII字符）组成

#### ⚠ 扩展

##### 什么是国际化，为什么它很重要？

为了确保最终用户可以在世界各地使用他们的母语无缝地工作、协作、交流等，软件开发人员在所有软件和服务中部署了 Unicode 体系结构和标准。

国际化（又名“i18n”）是针对不同文化、地区或语言的目标受众设计和开发的产品。软件国际化意味着可以支持不同地区和语言的人类期望与应用程序交互的方式，包括文本、数字、日期等的呈现，以及用户界面的布局。

Unicode 建立了基础层（字符集、区域设置数据、算法），使设计能够同时处理所有语言和区域要求的代码成为可能，同时最大限度地减少对较低级别细节和怪癖干扰该设计的需要。

##### 什么是Unicode？

Unicode 联盟是软件和服务国际化的首要标准组织，包括所有现代计算系统的文本编码。该联盟通过提供核心库、软件算法和结构化数据来支持 [Unicode 标准的](https://www.unicode.org/versions/latest)国际化。

Unicode 标准是指表示**所有自然语言字符的标准字符集**。Unicode 最多可以编码**大约 110 万个字符**，使其能够在一个通用标准中支持世界上所有的语言和文字。

所有现代操作系统、计算环境、编程语言和应用程序都支持 Unicode 标准的核心。由于 Unicode 标准以统一的方式指定了所有语言的字符处理，因此它简化并启用了对区域设置敏感的 i18n 算法，否则这是不可能的，例如：

- 排序和字符串搜索/匹配
- 单词/句子边界检测和换行
- 从右到左的文本区域边界分析
- 数字、时间、列表和复数消息的格式

Unicode 数据和库还支持更多功能。更高级别的计算应用程序依靠这些功能来实现其目标。

##### 如何使用unicode

- 字符串表示：在大多数编程语言中，字符串通常使用 Unicode 来表示文本。可以直接在代码中使用字符，例如 `char`、`String`、`wchar_t`（在某些语言中），这些字符变量将使用 Unicode 编码。
- 转义序列：可以在字符串中使用 Unicode 转义序列来插入特定字符。在大多数编程语言中，Unicode 转义序列以 `\u` 开头，后跟 4 个十六进制数字来表示字符的 Unicode 代码点。例如，`\u0041` 表示字符 'A'。
- Unicode 字符库：Unicode 字符库通常包含了各种字符的详细信息，包括它们的名称、编码、属性等。可以使用这些信息来操作和分析文本。

```java
String omega = "\u03A9";
System.out.println(omega); // 输出：Ω
```

将 Unicode 转义序列 `\u03A9` 转换为 U+10FFFF 格式

1. 首先，将 `\u` 转义序列移除。
2. 获取转义序列中的十六进制数字（在这种情况下是 `03A9`）。
3. 将这些十六进制数字转换为十进制。
4. 最后，将转换后的十进制数表示为 U+ 后跟八位十六进制数字。

```
移除 \u，得到 03A9。

将 03A9 转换为十进制，得到 937。

最后，将它表示为 U+ 后跟八位十六进制数字，即 U+00000937。

所以，\u03A9 转换为 U+10FFFF 格式后是 U+00000937。
```

>在现代大多数编程语言中，字符串通常使用 Unicode 编码来表示文本。这意味着无论使用哪种编程语言编写代码，字符串变量通常会在内部以 Unicode 编码表示文本字符。
>
>这种做法使编程语言能够支持多语言和国际化，因为 Unicode 具有广泛的字符覆盖范围，可以表示各种不同语言的字符和符号。因此，开发人员可以编写能够处理和显示不同语言的应用程序，而不必担心字符编码的复杂性。

[Unicode官方网站](https://www.unicode.org/)

### 3.2. 词汇翻译

将原始的 Unicode 字符流转化成一系列标记（tokens）的过程:

**Unicode 转义的翻译**：

- 第一步是将原始的 Unicode 字符流中的 Unicode 转义序列（如 `\u1234`）翻译为对应的 Unicode 字符。
- 这种翻译使得任何程序都可以用只包含 ASCII 字符的方式来表示。
- 例如，`\u1234` 被翻译为相应的 Unicode 字符。

**Unicode 流到输入字符和行终止符的翻译**：

- 第二步是将第一步中得到的 Unicode 字符流翻译为输入字符和行终止符。这是为了更好地处理文本的格式化和结构。
- 输入字符和行终止符是编程语言中的基本构建块，用于构建程序代码。

**输入字符和行终止符到输入元素的翻译**：

- 第三步是将第二步中得到的输入字符和行终止符翻译为输入元素，这些元素在去除空格和注释后构成了编程语言的标记。
- 输入元素是语法规则中的终结符，它们构成了编程语言的基本结构。

>考虑以下原始的 Unicode 字符流：
>
>```
>This is an example: \u20AC \u0024
>```
>
>这个字符流包含了一些文本和 Unicode 转义序列。我们将按照上述步骤将其转化为输入元素。
>
>1. **Unicode 转义的翻译**：
>
>   - 首先，我们将 Unicode 转义序列 `\u20AC` 翻译为相应的 Unicode 字符，即欧元符号 €。同样，`\u0024` 被翻译为美元符号 $。
>
>2. **Unicode 流到输入字符和行终止符的翻译**：
>
>   - 此步骤将我们得到的 Unicode 字符流转化为输入字符和行终止符。在这个例子中，原始字符流没有显式的行终止符，因此这个步骤主要涉及字符的翻译。
>
>   - 我们得到以下输入字符序列：
>
>     ```vbnet
>     This is an example: € $
>     ```
>
>3. **输入字符和行终止符到输入元素的翻译**：
>
>   - 最后一步是将输入字符和行终止符转化为输入元素，这些元素构成了编程语言的标记。
>
>   - 在这个示例中，没有注释和额外的空格，所以输入元素将保留原始的输入字符，因此以下是输入元素序列：
>
>     ```vbnet
>     This
>     is
>     an
>     example:
>     €
>     $
>     ```

### 3.3. Unicode 转义

**Unicode 转义的转化规则**：

- 当处理带有 `\` 字符的输入时，以避免歧义，Java 编译器根据前一个字符的情况来决定是否继续处理 Unicode 转义。
  - 如果前一个字符是从一个 Unicode 转义序列中翻译而来，那么 `\` 字符后的 `u` 可以开始另一个 Unicode 转义。
  - 否则，Java 编译器将考虑连续出现的 `\` 字符的数量，如果数量是偶数，则 `\` 字符后的 `u` 可以开始一个新的 Unicode 转义；如果数量是奇数，则 `\` 字符后的 `u` 不会开始一个 Unicode 转义。
  - 如果一个可用于开始 Unicode 转义的 `\` 后不是 `u`，则它将被视为原始输入字符。

>简单解释：就是意味着在编程语言中只有'\u3014'，单个\后面跟u，才会被转义。其他都会被认为原始文本

### 3.4. 线路终止符

Java 编译器在处理 Unicode 输入字符时如何识别行终止符？

**行终止符**：

- 行终止符是一种特殊字符，用于表示行的结束。在 Java 编程语言中，行终止符可以有以下形式：
  - ASCII LF 字符，也被称为 "newline"（换行符）。
  - ASCII CR 字符，也被称为 "return"（回车符）。
  - ASCII CR 字符后跟 ASCII LF 字符（CR LF 组合）。

>**行分割**：
>
>- Java 编译器使用行终止符来将 Unicode 输入字符序列分割成多行。每当编译器遇到行终止符时，它将认为当前行的结束，并开始下一行。
>- 行终止符可以是 CR、LF 或 CR LF 的组合。两个字符 CR 立即跟随 LF 被视为一个行终止符，而不是两个独立的行终止符。

### 3.5. 注释

1. **传统注释（Traditional Comment）**：
   - 传统注释以 `/*` 开头，以 `*/` 结尾。在传统注释中，所有从 `/*` 到 `*/` 之间的文本都被忽略，这类似于C和C++中的注释形式。
2. **行尾注释（End-of-Line Comment）**：
   - 行尾注释以 `//` 开头，一直延续到该行的末尾。在行尾注释中，从 `//` 到行尾的文本都被忽略，这类似于C++中的注释形式。

>- 注释不支持嵌套。也就是说，在一个注释内部不能包含另一个注释。
>- 在传统注释中，`/*` 和 `*/` 本身没有特殊含义，它们只是用于标识注释的开始和结束。
>- 在行尾注释中，`//` 也没有特殊含义，它仅表示注释的开始。
>- 注释不会出现在字符文字（character literals）、字符串文字（string literals）或文本块（text blocks）中。

### 3.6. 标识符

Java编程语言中的标识符规则：

1. **标识符（Identifier）**：

   - 标识符是由Java字母（Java letters）和Java数字（Java digits）组成的无限长度序列，其中第一个字符必须是Java字母。

2. **标识符字符（IdentifierChars）**：

   - 标识符字符由Java字母后跟零个或多个Java字母或数字组成。

3. **Java字母（JavaLetter）**：

   - Java字母是指那些通过 `Character.isJavaIdentifierStart(int)` 方法返回true的Unicode字符。

     ```java
     System.out.println(Character.isJavaIdentifierStart(0x123));
     ```

4. **Java字母或数字（JavaLetterOrDigit）**：

   - Java字母或数字是指那些通过 `Character.isJavaIdentifierPart(int)` 方法返回true的Unicode字符。

>在Java中，Java字母包括ASCII大写字母A-Z（\u0041-\u005a）、小写字母a-z（\u0061-\u007a），以及出于历史原因的ASCII美元符号$（\u0024）和下划线_（\u005f）。美元符号通常只在自动生成的源代码或罕见情况下用于访问遗留系统中预先存在的名称。下划线可以用于由两个或更多字符组成的标识符，但由于它是一个关键字，不能用作一个字符的标识符。

### 3.9. 关键词



### 3.10. 文字
### 3.10.1. 整数文字
### 3.10.2. 浮点文字
### 3.10.3. 布尔文字
### 3.10.4. 字符文字
### 3.10.5。字符串文字
### 3.10.6。文本块
### 3.10.7. 转义序列
### 3.10.8。空文字
### 3.11. 分离器
### 3.12. 运营商

